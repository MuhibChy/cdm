<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDMS Browser Compatibility Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f4f4f4;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .nav-links {
            margin: 20px 0;
        }
        .nav-links a {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .nav-links a:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üîç CDMS Browser Compatibility Test</h1>
    
    <div class="nav-links">
        <a href="index.html">üè† Home</a>
        <a href="demo.html">üöÄ Demo</a>
        <a href="admin_dashboard_demo.html">üë®‚Äçüíº Admin Dashboard</a>
        <a href="user_dashboard_demo.html">üë§ User Dashboard</a>
        <a href="superadmin_dashboard_demo.html">üëë Super Admin</a>
    </div>

    <div class="test-container">
        <h2>üìã System Requirements Test</h2>
        <div id="browser-info"></div>
        <div id="feature-tests"></div>
    </div>

    <div class="test-container">
        <h2>üîó Resource Loading Test</h2>
        <div id="resource-tests"></div>
    </div>

    <div class="test-container">
        <h2>üì± Responsive Design Test</h2>
        <div id="responsive-tests"></div>
    </div>

    <div class="test-container">
        <h2>‚ö° JavaScript Functionality Test</h2>
        <div id="js-tests"></div>
    </div>

    <script>
        // Browser Information
        function displayBrowserInfo() {
            const browserInfo = document.getElementById('browser-info');
            const userAgent = navigator.userAgent;
            const browserName = getBrowserName(userAgent);
            
            browserInfo.innerHTML = `
                <div class="test-result info">
                    <strong>Browser:</strong> ${browserName}<br>
                    <strong>User Agent:</strong> ${userAgent}<br>
                    <strong>Screen Resolution:</strong> ${screen.width} x ${screen.height}<br>
                    <strong>Viewport:</strong> ${window.innerWidth} x ${window.innerHeight}<br>
                    <strong>JavaScript:</strong> Enabled ‚úÖ<br>
                    <strong>Local Storage:</strong> ${typeof(Storage) !== "undefined" ? "Supported ‚úÖ" : "Not Supported ‚ùå"}
                </div>
            `;
        }

        function getBrowserName(userAgent) {
            if (userAgent.includes('Chrome')) return 'Google Chrome';
            if (userAgent.includes('Firefox')) return 'Mozilla Firefox';
            if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) return 'Safari';
            if (userAgent.includes('Edge')) return 'Microsoft Edge';
            if (userAgent.includes('Opera')) return 'Opera';
            return 'Unknown Browser';
        }

        // Feature Tests
        function runFeatureTests() {
            const featureTests = document.getElementById('feature-tests');
            const tests = [
                { name: 'CSS3 Support', test: () => CSS.supports('display', 'flex') },
                { name: 'ES6 Support', test: () => {
                    try {
                        eval('const test = () => {};');
                        return true;
                    } catch(e) {
                        return false;
                    }
                }},
                { name: 'Fetch API', test: () => typeof fetch !== 'undefined' },
                { name: 'Canvas Support', test: () => {
                    const canvas = document.createElement('canvas');
                    return !!(canvas.getContext && canvas.getContext('2d'));
                }},
                { name: 'WebGL Support', test: () => {
                    const canvas = document.createElement('canvas');
                    return !!(canvas.getContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
                }}
            ];

            let html = '';
            tests.forEach(test => {
                const result = test.test();
                html += `<div class="test-result ${result ? 'success' : 'error'}">
                    ${test.name}: ${result ? '‚úÖ Supported' : '‚ùå Not Supported'}
                </div>`;
            });
            
            featureTests.innerHTML = html;
        }

        // Resource Loading Tests
        function runResourceTests() {
            const resourceTests = document.getElementById('resource-tests');
            const resources = [
                { name: 'AdminLTE CSS', url: 'dist/css/adminlte.min.css' },
                { name: 'Font Awesome', url: 'plugins/fontawesome-free/css/all.min.css' },
                { name: 'jQuery', url: 'plugins/jquery/jquery.min.js' },
                { name: 'Bootstrap JS', url: 'plugins/bootstrap/js/bootstrap.bundle.min.js' },
                { name: 'AdminLTE JS', url: 'dist/js/adminlte.min.js' },
                { name: 'Logo Image', url: 'dist/img/xchire-logo.png' },
                { name: 'Client Image', url: 'dist/img/client.jpg' }
            ];

            let html = '<div class="test-result info">Testing resource availability...</div>';
            resourceTests.innerHTML = html;

            let results = [];
            let completed = 0;

            resources.forEach((resource, index) => {
                const xhr = new XMLHttpRequest();
                xhr.open('HEAD', resource.url, true);
                xhr.onload = function() {
                    results[index] = {
                        name: resource.name,
                        status: xhr.status,
                        success: xhr.status >= 200 && xhr.status < 300
                    };
                    completed++;
                    if (completed === resources.length) {
                        displayResourceResults(results);
                    }
                };
                xhr.onerror = function() {
                    results[index] = {
                        name: resource.name,
                        status: 'Error',
                        success: false
                    };
                    completed++;
                    if (completed === resources.length) {
                        displayResourceResults(results);
                    }
                };
                xhr.send();
            });
        }

        function displayResourceResults(results) {
            const resourceTests = document.getElementById('resource-tests');
            let html = '';
            
            results.forEach(result => {
                html += `<div class="test-result ${result.success ? 'success' : 'error'}">
                    ${result.name}: ${result.success ? '‚úÖ Available' : '‚ùå ' + result.status}
                </div>`;
            });
            
            resourceTests.innerHTML = html;
        }

        // Responsive Design Tests
        function runResponsiveTests() {
            const responsiveTests = document.getElementById('responsive-tests');
            const width = window.innerWidth;
            
            let deviceType = '';
            let cssFramework = '';
            
            if (width < 576) {
                deviceType = 'Extra Small (Mobile)';
                cssFramework = 'xs';
            } else if (width < 768) {
                deviceType = 'Small (Mobile)';
                cssFramework = 'sm';
            } else if (width < 992) {
                deviceType = 'Medium (Tablet)';
                cssFramework = 'md';
            } else if (width < 1200) {
                deviceType = 'Large (Desktop)';
                cssFramework = 'lg';
            } else {
                deviceType = 'Extra Large (Large Desktop)';
                cssFramework = 'xl';
            }

            responsiveTests.innerHTML = `
                <div class="test-result success">
                    <strong>Current Viewport:</strong> ${width}px<br>
                    <strong>Device Category:</strong> ${deviceType}<br>
                    <strong>Bootstrap Class:</strong> ${cssFramework}<br>
                    <strong>Touch Support:</strong> ${'ontouchstart' in window ? '‚úÖ Yes' : '‚ùå No'}<br>
                    <strong>Orientation:</strong> ${window.innerHeight > window.innerWidth ? 'Portrait' : 'Landscape'}
                </div>
            `;
        }

        // JavaScript Functionality Tests
        function runJSTests() {
            const jsTests = document.getElementById('js-tests');
            
            // Test jQuery
            let jqueryTest = false;
            try {
                if (typeof $ !== 'undefined') {
                    jqueryTest = true;
                }
            } catch(e) {}

            // Test Chart.js availability
            let chartjsTest = false;
            try {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
                script.onload = function() {
                    chartjsTest = true;
                    updateJSResults(jqueryTest, chartjsTest);
                };
                document.head.appendChild(script);
            } catch(e) {
                updateJSResults(jqueryTest, chartjsTest);
            }

            // Initial display
            updateJSResults(jqueryTest, chartjsTest);
        }

        function updateJSResults(jqueryTest, chartjsTest) {
            const jsTests = document.getElementById('js-tests');
            jsTests.innerHTML = `
                <div class="test-result ${jqueryTest ? 'success' : 'warning'}">
                    jQuery: ${jqueryTest ? '‚úÖ Available' : '‚ö†Ô∏è Loading from CDN'}
                </div>
                <div class="test-result info">
                    Chart.js: üîÑ Loading from CDN for demos
                </div>
                <div class="test-result success">
                    Toastify: ‚úÖ Loading from CDN
                </div>
                <div class="test-result success">
                    DataTables: ‚úÖ Available locally
                </div>
            `;
        }

        // Run all tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            displayBrowserInfo();
            runFeatureTests();
            runResourceTests();
            runResponsiveTests();
            runJSTests();
        });

        // Re-run responsive tests on window resize
        window.addEventListener('resize', runResponsiveTests);
    </script>
</body>
</html>
